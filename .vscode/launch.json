{
  // IntelliSense를 사용하여 가능한 특성에 대해 알아보세요.
  // 기존 특성에 대한 설명을 보려면 가리킵니다.
  // 자세한 내용을 보려면 https://go.microsoft.com/fwlink/?linkid=830387을(를) 방문하세요.
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Python: 현재 파일",
      "type": "python",
      "request": "launch",
      "program": "${file}",
      "console": "integratedTerminal",
      "cwd": "${workspaceFolder}",
      "justMyCode": true
    },
    // run rushguard cli with poetry
    {
      "name": "CLI: resource scale",
      "type": "python",
      "request": "launch",
      "module": "poetry",
      "console": "integratedTerminal",
      "cwd": "${workspaceFolder}",
      "args": [
        "run",
        "rushguard",
        "--env-file",
        "${input:envFile}",
        "resource",
        "scale",
        "--test-duration-second",
        "${input:testDurationSecond}",
        "--scaling-interval-second",
        "${input:scalingIntervalSecond}",
        "--output-file",
        "${input:outputFilePath}"
      ],
      "jinja": true,
      "justMyCode": true
    },
    {
      "name": "CLI: resource scale v2",
      "type": "python",
      "request": "launch",
      "program": "${workspaceFolder}/rushguard/scaler/resource.py",
      "console": "integratedTerminal",
      "cwd": "${workspaceFolder}",
      "args": [
        "--env-file",
        "${input:envFile}",
        "resource",
        "scale",
        "--test-duration-second",
        "${input:testDurationSecond}",
        "--scaling-interval-second",
        "${input:scalingIntervalSecond}",
        "--output-file",
        "${input:outputFilePath}"
      ],
      "jinja": true,
      "justMyCode": true
    },
    {
      "name": "CLI: get metrics",
      "type": "python",
      "request": "launch",
      "module": "poetry",
      "console": "integratedTerminal",
      "cwd": "${workspaceFolder}",
      "args": ["run", "rushguard", "--env-file", "${input:envFile}", "metric"],
      "jinja": true,
      "justMyCode": true
    },
    // execute locust ui
    {
      "name": "Python: locust",
      "type": "python",
      "request": "launch",
      "module": "poetry",
      "console": "integratedTerminal",
      "cwd": "${workspaceFolder}",
      "args": [
        "run",
        "locust",
        "-f",
        "${workspaceFolder}/tests/loadtest/locustfile.py",
        "--host",
        "${input:locustHost}"
      ],
      "env": {
        "PATTERN_FILE_PATH": "${input:patternFilePath}",
        "PATTERN_NAME": "${input:patternName}"
      },
      "jinja": true,
      "justMyCode": true
    }
  ],
  "inputs": [
    {
      "id": "envFile",
      "type": "promptString",
      "description": "env file path",
      "default": "${workspaceFolder}/.env"
    },
    {
      "id": "locustHost",
      "type": "promptString",
      "description": "locust host",
      "default": "http://webeng.dchain-connect.com/"
    },
    {
      "id": "testDurationSecond",
      "type": "promptString",
      "description": "Test Duration Second",
      "default": "600"
    },
    {
      "id": "scalingIntervalSecond",
      "type": "promptString",
      "description": "Scaling Interval Second",
      "default": "30"
    },
    {
      "id": "outputFilePath",
      "type": "promptString",
      "description": "Output File Path",
      "default": "${workspaceFolder}/graph.png"
    },
    {
      "id": "patternFilePath",
      "type": "promptString",
      "description": "Pattern file path",
      "default": "${workspaceFolder}/tests/patterns.csv"
    },
    {
      "id": "patternName",
      "type": "pickString",
      "description": "Pattern name",
      "options": ["p1"]
    }
  ]
}
